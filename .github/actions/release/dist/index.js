module.exports=(()=>{var __webpack_modules__={960:(e,t,r)=>{const o=r(508);const s=r(450);const a=r(622);const n=r(747);const c=r(921);const i=o.getInput("token");const _=s.getOctokit(i);async function main(){const[e,t]=process.env.GITHUB_REPOSITORY.split("/");o.info(`Repository ${e}/${t}`);let r;try{const e=a.join(process.env.GITHUB_WORKSPACE,"src/manifest.json");const t=n.readFileSync(e);const{version:s}=JSON.parse(t);r=s;o.info(`Detected version: ${r}`)}catch(e){o.setFailed(`Unable to get current version.`);o.error(e);process.exit()}let s;try{const{data:a}=await _.repos.getLatestRelease({owner:e,repo:t});s=a.tag_name;o.info(`Previous release version: ${s}`);if(s===r){o.info("Version has not changed.");process.exit()}}catch(e){o.info("No previous release version.")}const i=s?`https://github.com/${e}/${t}/compare/${s}...${version}`:`Initial release`;let l;try{const{data:s}=await _.repos.createRelease({owner:e,repo:t,tag_name:r,name:r,body:i});l=s.upload_url;o.info(`Created release ${s.name}`)}catch(s){o.setFailed(`Failed to create release ${r} for ${e}/${t}#${process.env.GITHUB_SHA}.`);o.error(s);o.debug(JSON.stringify(s.headers));o.debug(JSON.stringify(s.request));process.exit()}let p;try{const e=a.join(process.env.GITHUB_WORKSPACE,"src");const t=new c;t.addLocalFolder(e);p=t.toBuffer();o.info(`Stored zip to buffer.`)}catch(e){o.setFailed(`Failed to save zip.`);o.error(e);process.exit()}try{o.info(p.length);o.info(p);await _.repos.uploadReleaseAsset({url:l,headers:{"content-type":"application/zip","content-length":p.length},name:`SxDashPlus-${r}.zip`,data:p});o.info(`Uploaded asset to release.`)}catch(e){o.setFailed(`Failed to upload release asset.`);o.error(e);process.exit()}}main()},508:module=>{module.exports=eval("require")("@actions/core")},450:module=>{module.exports=eval("require")("@actions/github")},921:module=>{module.exports=eval("require")("adm-zip")},747:e=>{"use strict";e.exports=require("fs")},622:e=>{"use strict";e.exports=require("path")}};var __webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e]){return __webpack_module_cache__[e].exports}var t=__webpack_module_cache__[e]={exports:{}};var r=true;try{__webpack_modules__[e](t,t.exports,__webpack_require__);r=false}finally{if(r)delete __webpack_module_cache__[e]}return t.exports}__webpack_require__.ab=__dirname+"/";return __webpack_require__(960)})();